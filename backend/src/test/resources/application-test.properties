# ================================
# Configuration pour les TESTS
# Base H2 en memoire (ne touche pas aux donnees de dev)
# ================================

spring.application.name=fieldz-test

# H2 en memoire (cree/detruit a chaque execution)
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false

# Desactiver H2 console en test
spring.h2.console.enabled=false

# JWT simplifie pour tests (HS256 au lieu de RS256)
jwt.alg=HS256
jwt.secret=test-secret-key-for-unit-tests-minimum-32-chars-long
jwt.access.expMinutes=60

# CORS permissif pour tests
cors.allowed-origins=*
cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
cors.allowed-headers=*

# Mail desactive pour tests
spring.mail.host=localhost
spring.mail.port=25
spring.mail.username=test
spring.mail.password=test
spring.mail.from=test@fieldz.com

# Cloudinary mock values
cloudinary.cloud-name=test-cloud
cloudinary.api-key=test-key
cloudinary.api-secret=test-secret

# Google OAuth2 mock values
spring.security.oauth2.client.registration.google.client-id=test-client-id
spring.security.oauth2.client.registration.google.client-secret=test-client-secret

# Desactiver les cookies securises en test
security.cookies.domain=localhost
security.cookies.secure=false

# Logging reduit pour tests
logging.level.org.springframework=WARN
logging.level.org.hibernate=WARN
logging.level.com.fieldz=INFO
